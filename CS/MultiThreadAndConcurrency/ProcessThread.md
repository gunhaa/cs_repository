# 프로세스

![images](images/process1.png)

- 프로그램은 실제 실행하기 전까지는 단순한 파일
- 프로그램을 실행하면 프로세스가 만들어지고 프로그램이 실행된다
- 이렇게 운영체제 안에서 실행중인 프로그램을 프로세스라고 한다
- 각 프로세스는 독립적인 메모리 공간을 가진다
  - 코드(실행할 코드의 프로그램 코드)
  - 데이터(전역 변수 및 정적 변수가 저장되는 부분)
  - 힙(동적으로 할당되는 메모리 영역)
  - 스택(메서드 호출시 생성되는 지역변수와 반환 주소가 저장되는 영역, 스레드에 포함되어 있다)
- 운영체제에서 별도의 작업 단위로 분리해서 관리된다
- 각 프로세스는 별도의 메모리 공간을 갖고 있기에 서로 간섭하지 않는다(하나의 프로세스가 오류가 생겨도 다른 프로세스는 문제가 생기지 않는다)
- 프로세스는 서로의 메모리에 직접 접근이 불가능하다

# 스레드

- 프로세스는 하나 이상의 스레드를 \*\*반드시 포함한다
- 스레드는 프로세스 내에서 실행되는 작업의 단위이다
- 이들은 프로세스가 제공하는 동일 메모리 공간을 공유한다
- 프로세스보다 단순해 생성 및 관리가 단순하고 가볍다(스택만 가지고 있기 때문)
- 스레드의 메모리 영역은 2개로 구성 되 어있다
  - 1. 공유 메모리: 프로세스의 코드 섹션, 데이터 섹션, 힙은 프로세스안의 모든 스레드가 공유한다
  - 2. 개별 스택: 각 스레드는 자신의 스택을 갖고 있다

# 프로그램이 실행된다는 것의 의미

- 프로그램을 실행하면 운영체제는 먼저 디스크에 있는 파일 덩어리인 프로그램을 메모리로 불러오면서 프로세스를 만든다
- 프로그램이 실행된다는 것은 사실 프로세스 안에 있는 코드가 한 줄씩 실행 되는 것이다
  - 코드는 보통 main()부터 실행되어, 순서대로 내려가면서 실행 된다
- 마치 실(thread) 같은 것이 코드를 위에서 아래로 하나씩 꿰면서 하나씩 내려가는 것 같다
- 이렇듯 프로세스의 코드를 실행하는 흐름을 스레드라 한다
- 스레드는 번역하면 "실", "실을 꿰다" 라는 뜻이다

# Recap

- 프로세스는 실행 자원과 자원을 제공하는 컨테이너 역할을 한다
- 스레드는 CPU를 사용해서 코드를 하나하나 실행한다
- 멀티 스레드가 필요한 이유
    - 하나의 프로그램도 그 안에서 동시에 여러 작업이 필요하다
    - 워드 프로그램으로 문서를 편집하면서, 문서가 자동으로 저장되고 맞춤법 검사도 함께 수행된다
    - 유튜브는 영상을 보는 동안, 댓글도 달 수 있다
- 멀티스레드 예시
    - 워드 프로그램 - 프로세스A
        - 스레드1: 문서 편집
        - 스레드2: 자동 저장
        - 스레드3: 맞춤법 검사
    - 유튜브 - 프로세스B
        - 스레드1: 영상 재생
        - 스레드2: 댓글