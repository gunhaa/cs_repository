# WebFlux Overview

- Flux, Scheduler, WebFlux의 관계는 '건축'에 비유하여 설명할 수 있다.
    - Flux / Mono: 집을 짓는 순서와 방법이 모두 담긴 완벽한 건축 설계도에 해당한다. 이 설계도 자체는 집을 짓지 않지만, 어떻게 지어야 하는지에 대한 모든 정보(비동기 흐름)를 담고 있다.
    - Scheduler: 설계도를 보고 실제 공사를 수행하는 건설 인력팀이다. subscribeOn, publishOn을 통해 어떤 공정을 어떤 팀에게 맡길지(어떤 스레드 풀을 사용할지) 지정할 수 있다.
    - WebFlux: 건축 허가를 내주고, 부지를 제공하며, 전체 프로젝트를 관리하는 현장 감독관이다. 요청이 들어오면 설계도를 가져와 인력팀에게 일을 시키고 전체 과정을 감독한다.

1. Flux: 비동기 청사진
Flux는 그 자체로 데이터 처리 흐름을 정의하는 '비동기 청사진'이다. 기본적으로 Flux는 그것을 구독(subscribe)하는 스레드에서 동작하지만, Scheduler를 통해 다른 스레드에서 동작하도록 지정될 수 있는 능력을 이미 가지고 있다.

2. Scheduler: 멀티스레드 기능 제공
실제 멀티스레딩을 통한 비동기 동작은 Scheduler가 담당한다. subscribeOn(Schedulers.boundedElastic()) 코드를 추가하는 순간, 개발자는 '건축 설계도'에 "이 부분은 I/O 전문 인력팀에게 맡겨주세요"라고 명시하는 것과 같다. 이 기능은 순수하게 Reactor 라이브러리의 기능이다.

3. WebFlux: 최적의 실행 환경 구성
WebFlux는 이 모든 것을 아우르는 실행 환경을 제공한다. WebFlux는 Netty라는 논블로킹 서버를 기반으로 동작하며, 들어오는 모든 HTTP 요청을 비동기 이벤트로 처리한다. WebFlux는 HTTP 요청이 오면, 개발자가 정의한 Flux(설계도)를 가져와서 구독(subscribe)을 시작시킨다. 만약 설계도에 Scheduler 지정이 있다면 그에 맞춰 인력팀(스레드 풀)을 배정하여 전체 프로세스가 막힘없이(non-blocking) 동작하도록 조율한다.