# 데이터 베이스 소개

- 데이터베이스란 특정 목적을 위해 구조화된 데이터의 모음이다

## 데이터와 정보

- 어떤 개념을 학습할 때 그 개념의 핵심 단어를 먼저 이해하는 것이 중요하다
- 데이터베이스를 제대로 이해하려면, 먼저 Data가 무엇인지 이해해야 한다
- 데이터(Data)는 언뜻 쉬워 보이지만, 정보(Information)라는 단어와 비교할 때 그 의미가 비로소 명확해진다
- 데이터와 정보의 차이를 이해하는 것은 우리가 왜 데이터를 힘들게 모으고 관리하며 데이터베이스 라는 도구를 배워야하는지에 대한 답을 준다

### 데이터와 정보, 무엇이 다른가?

> 데이터를 가공해 의미있는 정보로 만들어야 한다

#### 1단계: Data - 의미 없는 기록 조각

- Data란 아직 가공되지 않은 개별적인 사실이나 값 그 자체를 의미한다
- Context(문맥)이 없어서 그 자체만으로는 온전한 의미를 갖기 어려운, 말 그대로 'Raw'기록 조각이다
- 쇼핑몰의 주문기록의 데이터는 다음과 같다
- user01
- 티셔츠
- 25000
- 2025-05-30

#### 1.5단계: Structured Data - 의미를 담은 재료

- 현실에서 데이터는 완전히 흩어져 있기보다는, 수집 단계부터 최소한의 구조를 가지고 정리된다
- 각 데이터 조각에 꼬리표(Label)을 붙여주는 단계다
- information이라는 요리를 만들기 위해 재료를 손질해서 잘 정리해두는 과정이다

| 주문번호 | 고객ID | 상품명 | 수량 | 주문금액 | 주문일자 |
|---|---|---|---|---|---|
| 1001 | user01 | 티셔츠 | 2 | 50,000 | 2025-05-29 |
| 1002 | user02 | 청바지 | 1 | 70,000 | 2025-05-29 |
| 1003 | user01 | 티셔츠 | 1 | 25,000 | 2025-05-30 |
| 1004 | user03 | 운동화 | 1 | 120,000 | 2025-05-30 |
| 1005 | user02 | 티셔츠 | 3 | 75,000 | 2025-05-30 |
- 1단계 파편화된 값과 비교해서 의미를 갖게되고, 훨씬 명확해진다
- 하지만 이 표도 여전히 기록의 목록일 뿐이다
- 어떤 상품이 인기가 많지? 라는 질문에 답해주지 못한다
- 즉, 의미는 생겼지만 의사결정에 필요한 통찰은 줄 수 없다

#### 2단계: Information(정보) - 목적을 가진 결과물

- Information은 이렇게 구조화된 데이터를 특정한 질문이나 목적을 가지고 분석하고 가공해서 얻어낸 유의미한 결과물이다
- 데이터라는 재료를 가지고 질문에 대한 답을 찾아낸 완성된 요리인셈이다
- 쇼핑몰 대표님이 우리에게 질문했다고 가정한다
  - "2025년 5월 30일에 가장 많이 팔린 상품은 무엇이고, 총 몇개나 팔렸는가?"
  - 이 질문에 대답하기 위해 우리는 1.5 단계의 구조화된 데이터를 다음과 같이 가공한다
  - Filtering
    - 주문일자가 2025-05-30인 데이터만 골라낸다
  - Grouping & Aggregation
    - 골라낸 데이터를 '상품명'으로 묶고, '수량'을 합산한다
  - 이 과정을 통해 명확한 정보를 전달 가능하다
    - 2025년 5월 30일에는 티셔츠가 총4개로 가장 많이 팔렸습니다
- 이외에도 우리는 같은 데이터를 활용해서 아래와 같은 다양한 정보를 뽑아낼 수 있다
  - user01은 5월 29일과 5월 30일에 모두 구매한 재구매 고객이다
  - 5월 30일의 총 매출액은 220,000원이다
  - 가장 높은 금액의 단일 주문은 120,000원짜리 운동화였다

  ### 그래서 데어타와 정보가 왜 중요한가?

- 우리 쇼핑몰이 성공하기 위해서는 위와같은 정보를 바탕으로 똑똑한 결정을 내려야 한다
  - 어떤 상품이 잘 팔리는지 (정보) 알아야 재고 관리를 효율적으로 할 수 있다 (의사결정)
  - 누가 우리의 VIP 고객인지 (정보) 알아야 맞춤형 마케팅을 제공할 수 있다 (의사결정)
  - 날짜별 매출 추이가 어떤지 (정보) 알아야 새로운 프로모션을 기획할 수 있다 (의사결정)
- 이 모든 것은 흩어져 있는 데이터를 의미 있는 정보로 만들 때 비로소 가능해진다
- 데이터베이스는 필요한 데이터를 체계적으로 정리하고(1.5단계), 우리가 원하는 조건으로 쉽고 빠르게 찾아내고 가공해서(2단계) 정보로 만들 수 있도록 도와주는 가장 강력한 핵심도구이다

> base: 데이터가 체계적으로 저장되고 관리되는 '저장소'또는 '기반시설'을 나타낸다. 마치 군사 기지가 군사 활동의 거점이 되듯이, 데이터베이스는 데이터 관리의 중심 거점 역할을 한다. 정리하면 데이터베이스는 "데이터를 체계적으로 모아 놓은 핵심 저장소"라는 뜻이다

## 데이터베이스 관리 시스템이 필요한 이유

- 쇼핑몰을 운영하면서 생기는 수많은 데이터들(고객정보, 상품정보, 주문내역)을 어딘가에는 저장해야 정보로 만들 수 있다

### 왜 데이터 저장 방식에 대해 고민해야 할까?

- 쇼핑몰이 점점 커지며 데이터는 기하급수적을 늘어난다
- 처음에는 몇 개 안되어 메모장이나 장부에 적을수도있다
  - 하지만 하루에 수백, 수천건씩 주문이 들어오고 수만 명의 고객 정보를 관리해야한다면 문제가 생긴다
  - 데이터가 엉망으로 관리되면 필요한 정보를 제때 얻을 수 없고, 결국 운영에 큰 차질이 생긴다
  - 그래서 데이터를 '어떻게 잘 보관하고 관리할 것인가'는 아주 중요한 문제가 된다

### DBMS가 생기기 이전 정보를 관리하는 방법 - 파일

- 파일로 고객 정보/고객주문을 관리한다고 가정하고, 서로 다른 팀에서 사용하면 아래의 문제가 발생한다
  1. 데이터의 중복: 고객 정보가 고객 정보/일일 주문 처리 두 개의 파일에 중복으로 저장되어있다
  2. 데이터 불일치: 고객의 주소가 바뀔 경우 고객의 정보가 서로 다른 값을 갖게 된다
    - 실무에서는 이처럼 데이터가 여러 파일에 나뉘어 중복 저장되면 저장 공간 낭비는 물론, 하나의 정보가 수정될 때마다 관련된 모든 파일을 찾아 빠짐없이 수정해야 하는 번거로움이 생긴다. 담당자가 실수로 하나라도 놓치면 데이터는 어긋나 버리고, 이는 곧 회사의 신뢰도 하락과 금전적 손실로 직결된다
  3. 데이터 접근의 어려움: 고객 정보파일, 상품 정보파일, 주문 내역파일을 각각 가지고있다면 필요에 따라 파일을 확인해야해서 매우 어렵다
  4. 데이터 무결성 제약조건 적용의 어려움: 데이터는 일정한 규칙이 있어야한다(상품 가격은 0보다 크고, 주문 수량은 최소 1개, 회원의 아이디는 중복되어선 안된다)
    - 파일을 사용한다면 유효성 검사를 데이터 입력 어플리케이션 측에서 다 책임져야하는데, 이건 매우 번거롭고 빠뜨리기 쉽다
  5. 동시성 제어 문제
    - 재고가 한개남은 물건을 운영자A와 운영자B가 동시에 바꾸면, 큰 문제가 생긴다(데이터 일관성이 깨진다)
      - 파일 시스템은 기본적으로 여러 사용자가 동시에 안전하게 데이터를 수정하는 것을 고려하여 설계되지 않았다
      - 누가 먼저 파일을 열었는지, 수정 중인 내용은 어떻게 처리할지 등에 대한 복잡한 제어로직이 없다
  6. 보안 문제
    - 고객 정보 파일에는 민감한 주민등록 번호나 계좌 번호가 포함되어있을 수 있다
      - 특정 직원에게는 고객 이름과 연락처만 보여주고, 재무팀 직원에게만 계좌번호를 보여주는 식으로 권한을 설정해야한다
    - 파일 시스템의 접근 권한 설정으로는 세밀한 데이터 접근 제어가 어렵다
  7. 데이터 회복과 백업의 어려움
    - 파일을 정기적으로 백업을 해두지 않았다면, 하드디스크 고장이나 실수로 삭제해서 모든 데이터를 날리는 상황이 발생할 수 있다
    - 데이터는 비즈니스의 핵심 자산이므로 어떤 장애 상황에서도 안전하게 보호되고 신속하게 복구될 수 있는 체계가 필요하지만 파일 시스템은 이를 위한 정교한 메커니즘을 제공하지 않는다

### 파일 시스템의 문제를 해결하기 위한 DBMS

- DBMS는 파일에서 발생했던 문제를 모두 해결해준다


## DBMS란?

- 사용자와 데이터베이스 사이에서 사용자의 요구에 따라 데이터베이스를 생성,정의,공유,사용,관리하는 기는을 수행하는 소프트웨어 시스템을 말한다
  - 데이터베이스는 데이터를 체계적으로 모아놓은 창고이고, DBMS는 이 창고를 효율적으로 관리하는 소프트웨어라고 할 수 있다

### 파일 시스템과 DBMS 비교

- DBMS를 사용하면 개발자가 직접 파일을 다루는 대신에 DBMS 소프트웨어가 대신 파일을 사용해서 데이터를 저장하
고 관리한다

1. DBMS의 역할: DBMS는 데이터를 효율적으로 저장, 검색, 수정, 삭제할 수 있도록 하는 소프트웨어이다. (프로그램으로 생각하면 된다. 실제로 설치해야 한다.)

2. 데이터 저장: DBMS는 결국 데이터를 운영체제의 파일 시스템 위에 있는 특정한 형식의 파일들에 저장한다. 이
파일들은 일반적인 텍스트 파일이나 CSV 파일과는 달리 DBMS 자체의 특별한 구조와 방식으로 구성되어 있어
서 매우 효율적으로 데이터를 관리할 수 있다.

3. 추상화: 개발자나 사용자는 DBMS가 내부적으로 어떤 파일에 어떻게 데이터를 저장하는지 알 필요가 없다. 대신
SQL과 같은 표준화된 언어를 사용하여 DBMS에 "이런 데이터를 저장해줘" 또는 "이런 데이터를 찾아줘" 라고 요
청만 하면 된다. 그러면 DBMS가 알아서 내부 파일을 조작하여 요청을 처리한다.

4. 직접 접근 금지: DBMS가 관리하는 내부 데이터 파일들은 사용자가 직접 열어보거나 수정하려고 해서는 안 된다.
그렇게 할 경우 데이터가 손상되거나 DBMS 시스템 전체에 문제가 생길 수 있다. 모든 데이터 접근은 반드시
DBMS를 통해서 이루어져야 한다.

- 간단히 비유하자면
  - 파일 직접 처리: 직접 돈을 직접 금고(파일)에 넣고 빼고 관리하는 것과 같다. 어떤 돈을 어디에 뒀는지, 안전한지
등을 직접 신경 써야 한다.
  - DBMS 사용: 은행(DBMS)에 돈을 맡기는 것과 같다. 여러분은 은행 창구(SQL 등 인터페이스)를 통해 입출금 요
청만 하면, 은행 내부에서는 어떤 금고(내부 파일)에 어떻게 돈을 보관하고 관리하는지는 알아서 처리해 준다. 여
러분은 은행 내부의 복잡한 시스템을 알 필요가 없다.

- 결론적으로, DBMS는 개발자가 파일 시스템의 복잡한 부분을 직접 다루지 않도록 하고, 대신 데이터를 보다 체계적이
고 안전하며 효율적으로 관리할 수 있는 추상화된 방법을 제공하는 것이다. 그리고 그 과정에서 DBMS는 내부적으로
파일을 사용해서 실제 데이터를 디스크에 저장한다

#### DBMS는 도서관 사서

- DBMS는 **거대한 도서관의 아주 유능한 사서**와 같다고 생각할 수 있다.
- 도서관에는 수많은 책(데이터)들이 있다. 사서(DBMS)는 이 책들을 그냥 아무렇게나 쌓아두지 않는다.
    - 책의 주제별로 분류하고(데이터 정의/ Data Definition Language - DDL),
    - 새로운 책이 들어오면 등록하고(데이터 생성/ DML),
    - 어떤 책이 어디 있는지를 목록(카탈로그)으로 만들고 관리하며(데이터 관리),
    - 사람들이 책을 쉽게 찾고 빌려볼 수 있도록 도와주고(데이터 조작 및 접근/ Data Manipulation Language - DML),
    - 아무나 귀중한 고서를 만지지 못하게 하고(데이터 제어, 보안, Data Control Language - DCL),
    - 책이 훼손되지 않도록 관리하고(데이터 무결성),
    - 도서관 문을 닫은 후에도 책이 안전하게 보관되도록 하며(백업 및 복구/ Redo log, Undo log),
    - 여러 사람이 동시에 도서관을 이용해도 혼란이 없도록 질서를 유지한다(동시성 제어/Transaction).
- 이 모든 복잡하고 중요한 일을 사서(DBMS)가 다 알아서 해주는 것이다. 우리는 그냥 사서에게 "혹시 '성공하는 쇼핑몰
운영 비법'에 대한 책 있나요?" 라고 물어보기만 하면, 사서가 알아서 찾아다 주는 것이다. 우리가 직접 수만 권의 책 사
이를 헤맬 필요가 없는 것처럼, 애플리케이션 개발자나 사용자는 데이터가 디스크에 물리적으로 어떻게 저장되는지 몰
라도 DBMS를 통해 논리적으로 데이터에 접근하고 활용할 수 있다.

## RDBMS의 핵심 개념

- 관계형 모델의 핵심 개념: 모든 데이터는 '표'에서 시작한다
  - 관계형 데이터베이스는 데이터를 '표'의 형태로 관리한다
    - Table: 관계형 데이터베이스에서 데이터를 저장하는 기본 구조이자 특정 주제와 관련된 데이터들의 집합
    - Row: 개별적인 데이터 항목 하나를 나타내며, Tuple/Record라고 불리기도 한다
    - Column: 테이블의 세로줄을 의미하며, 어떤 종류의 데이터가 저장될지를 정의하며, Attribute(속성)/ Field라고 부르기도 한다
  - 관계형 데이터베이스의 시작은 '표'의 개념을 그대로 가져오는 것에서부터 출발한다
    - 다만 데이터베이스는 여기에 몇 가지 강력한 규칙을 추가하여 엑셀을 뛰어넘는다

### RDBMS의 강력한 규칙

1. 기본 키(Primary Key) - 수 많은 데이터 속에서 '단 하나'를 식별하는 방법
- 문제 상황: 어떻게 데이터를 유일하게 구분할까?
  - 해결: 각 데이터를 유일하게 만들어주는 식별자, 기본 키(Primary key, PK)를 사용한다
  - 기본 키란 테이블에 있는 모든 row중 특정 행 하나를 유일하게 식별할 수 있는 Column또는 Column들의 조합을 말한다
    - 기본키는 두 가지 중요한 규칙을 반드시 지켜야한다
      - Uniqueness(고유성): 기본 키로 지정된 열의 값은 같은 테이블 내에서 절대 중복될 수 없다. 모든 행이 서로 다른 값을 가져야 한다
      - NOT NULL: 기본 키로 지정된 열에는 반드시 값이 있어야한다. 비어있거나(NULL) 값이 없는 상태는 허용되지 않는다
        - NULL은 값이 존재하지 않는 표현이다
2. 외래 키(Foreign Key) - 따로 떨어진 표들을 '관계'로 묶는 방법
- 문제 상황: 쪼개진 표들을 어떻게 연결할까?
  - 데이터 중복을 피하기 위해, 테이블을 나누어 저장하기로하면 해당 문제가 생긴다
  - 해결: 관계의 고리, Foreign Key를 이용한다
    - Foreign key란 한 테이블의 열이 다른 테이블의 기본 키(Primary key)를 참조하는 것을 말한다
  - 부모 자식의 관계
    - 두 테이블이 FK 값을 통해 관계가 있을 때 한쪽을 부모, 한쪽을 자식이라고 한다
    - 자식 테이블은 FK 값을 통해 부모 테이블을 참조한다(자식이 부모를 찾아간다)
      - FK 값을 가진 곳이 자식 테이블이다
  - 외래키의 중요한 규칙
    - Reference Integrity(참조 무결성)
      - 외래 키 열에 있는 값은 반드시 부모테이블(참조 당하는 쪽)의 기본 키 값 중 하나 이거나, 혹은 비어있어야(NULL)한다
      - 예를 들어 fk쪽에 부모 측 primary key에 존재하지도 않는 값을 넣을려고하면 DB에서 오류가 발생시켜 막아 데이터의 정합성을 보장한다
  - 왜 외래 키를 사용해 테이블을 연결하는가?
    - 테이블의 중복을 막고, 데이터의 일관성을 유지하며, 논리적으로 분리된 데이터들 사이에 '관계'를 맺어주기 위해서다
    - 이를 통해 우리는 작고 관리하기 쉬운 여러개의 테이블로 전체 시스템을 구조화할 수 있다

> 여기까지가 관계형 데이터베이스의 가장 핵심 개념 세가지 Table, Primary key, Foreign Key이다.