# AdminAPI

- AdminAPI는 Kong Gateway의 주요기능이다
  - Kong의 AdminAPI(Restful)을 통해서 모든 설정을 자동화하고 관리할 수 있다
  - 기본적으로 HTTP(8001), HTTPS(8444)를 통해 접근 가능하다

## 쓰는 이유

1. 운영 중인 Kong Gateway의 설정을 실시간으로 변경하고 적용할 수 있다
2. API구성을 코드로 관리하고, 변경 사항을 자동으로 반영할 수 있다
3. 게이트웨이의 상태를 프로그래밍 방식으로 확인하고, 관련 정보를 수집하여 모니터링 시스템과 연동할 수 있다
4. 조직의 필요에 맞는 자체 관리 UI나 스크립트를 개발할 수 있다

### 서버 자체에 코드를 만들어서 구동시키는 방식과 AdminAPI를 이용한 추가의 장단점

| 구분 | Admin API (동적 방식) | Declarative Config (정적 방식) |
| :--- | :--- | :--- |
| 설정 방식 | 실행 중인 서버에 API 요청 | 시작 시 설정 파일 로드 |
| 변경 적용 | 실시간, 무중단 | 파일 수정 후 reload 필요 |
| 주요 장점 | 유연성, 자동화, 무중단 운영 | 버전 관리 용이, 상태 예측 가능 |
| 적합한 환경 | MSA, DevOps, 동적 환경 | GitOps, 고정된 구성, 환경 복제 |

## 주요 관리 대상 entities

- Admin API를 통해 관리하는 주요 대상은 다음과 같다

1. Services: 업스트림 API를 추상화한 단위이다. 실제 API 서버의 주소(URL)와 프로토콜, 포트 등의 정보를 가진다
2. Routes: 클라이언트로부터 들어오는 요청을 어떤 서비스로 전달할지 결정하는 규칙이다. 경로(path), 호스트(host), 메서드(method) 등을 기준으로 요청을 매칭한다
3. Consumers: API를 사용하는 개발자나 외부 서비스를 식별하는 단위이며 주로 인증이나 접근 제어에 사용된다
4. Plugins: 인증, 로깅, 트래픽 제어, 요청/응답 변환 등 다양한 부가 기능을 제공하는 모듈이다. 서비스, 라우트, 또는 전역으로 적용할 수 있다.
