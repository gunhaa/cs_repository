# CPU 수준 자료형

## 자료형에 대한 이해

- C언어에서 자료형은 일정 길이의 메모리에 저장된 정보를 해석하는 방법
- 자료는 결국 숫자(2진수)
- C언어의 변수는 메모리를 사용하기 위한 문법으로 이해 할 수 있음
- 자료는 변수와 상수 두 종류가 있음(가변, 불변)
- CPU가 읽을 수 있는 숫자는 결국 정수/실수 밖에 없다

## C언어의 자료형

- 정수형(부호 유무, 크기)
- 실수형(크기)
- 유도형(\*, [], 구조체, 공용체)
- 함수형
- 무치형(void)

## 상수 정의 및 종류

- 값이 확정되어 앞으로 변할 가능성이 없는 수
- 리터럴 상수와 심볼릭 상수가 있음

### 리터럴 상수

- 문자 상수(ASCII 코드)
  - 미국에서 정식 규격으로 사용하는 American Standard Code for Information Interchange
- 문자열 상수(문자 배열, 줄여서 문자열)
  - "Hello, World"
- 정수 상수
  - 3, 4L
- 실수 상수
  - 3.4F, 123.45
  - 일반적으로 실수는 double(배정도 형식)을 뜻하고, float(단정도 형식)은 있다는 것 정도만 기억하면된다. 거의 쓰지 않는다

## 변수의 정의

- 변수 = 메모리
- 구체화하지 않았거나 앞으로 변경될 가능성이 있는 수(혹은 미지의 수)
- 메모리를 사용하는 가장 일반적인 방법
- 변수는 메모리가 가지는 특성(위치정보인 주소, 공간의 크기)을 가짐

### 정수형

<table>
  <tr>
    <th>자료형</th>
    <th>크기 (byte)</th>
    <th>설명</th>
  </tr>
  <tr>
    <td>char</td>
    <td>1</td>
    <td rowspan="5">부호비트(1비트)와 나머지 전체를 데이터 비트로 해석</td>
  </tr>
  <tr>
    <td>short</td>
    <td>2</td>
  </tr>
  <tr>
    <td>int</td>
    <td>4</td>
  </tr>
  <tr>
    <td>long</td>
    <td>4</td>
  </tr>
  <tr>
    <td>long long int</td>
    <td>8</td>
  </tr>
  <tr>
    <td>Unsigned 조합</td>
    <td>-</td>
    <td>부호비트도 데이터로 해석</td>
  </tr>
</table>

- 1byte는 중요한 의미를 가진다
  - 컴퓨터는 1byte단위로 메모리를 관리한다
- char형은 문자(signed, -128~127)이다, 하지만 숫자로 표현한다(컴퓨터에서의 문자 = 숫자)
- unsigned short(64kb, 0~65535), unsigned int(4gb, 0~4294967295) 정도는 기억해야한다

## 컴퓨터가 뺄셈을 하는 방법 1

- 6에 4를 더하면 10이다
  - 즉 4는 6에 대한 10의 보수
  - 어떤 수 A에 더해서 10의 거듭제곱(예: 10, 100, 1000...)이 되는 수를 A의 10의 보수라고 한다
- 13에 6에 대한 10의 보수 4를 더하고, 10자리에서 1을 뺴도 7(13-6=7)
- n의 보수
  - Not(n) + 1 = n+1의 보수

## 컴퓨터가 뺄셈을 하는 방법 2

- 2진수에서 0은 1로, 1은 0으로 뒤집으면 1의 보수
- 1010(10)을 반전 → 0101(5)
- 1의 보수에 1을 더하면 2의 보수
  - 1010 → 반전(0101) → +1 → 0110
- 어떤 숫자에 2의 보수를 더하면 자동으로 2진수 뺼셈
- 진행
  - 빼고 싶은 수(피감수, Subtrahend)의 2의 보수를 구함
  - 피연산 수(감수, Minuend)에 더함
  - 결과가 자리올림(Carry)되면 그 올림은 버림 (절사)

## 컴퓨터가 곱셈 하는 방법

- 4비트로 5를 표현하면 0101이다
- 4비트 0101을 왼쪼긍로 한 칸 씩 밀면 1010이다
- 맨 오른쪽에 0이 채워진다(Padding)
- 4비트로 표현하는 2진수 1010은 10이다
- 왼쪼긍로 한칸 밀면 x2, 두칸 밀면 x4가 된다
  - 그럼 x3은?
    - 1회를 << 시프트, + 자기자신을 하면 x3이 된다

## 컴퓨터가 나눗셈을 하는 방법 # 1

- 4비트를 6으로 표현하면 0110 이다
- 4비트 0110을 오른쪽으로 한칸씩(>>)밀면 0011이다
- 맨 왼쪽에 0이 채워진다(Padding)
- 4비트로 표현하는 2진수 0011은 3이다

- 혹은 해당 방법도 있다(7/2)
  - 7-2 = 5(진행)
  - 5-2 = 3(진행)
  - 3-2 = 1(진행)
  - 1은 더 뺄수가 없어서 종료
  - 3번의 진행이 일어나, 몫은 3이 된다

## 컴퓨터가 나눗셈 하는 방법 # 2

- 7을 0으로 나누면?
- 7에서 0을 빼면 7이고, 7은 0보다 크다
- 7에서 0을 계속 빼면 언젠가는 0보다 작은 숫자를 만날 수 있는가?
- 만날 수 없다면 뺄셈 연산은 언제 끝날까?
  - divide 0은 치명적인 오류라 검사한 뒤 빠르게 중지시킨다

## 실수형 - 단정도, 배정도

> 더 자세히 알고싶다면 IEEE754를 찾아보면 됨
> 이렇게 깊게 알아야할 필요까지는 없다, 기본만 이해할 것

- 소수점 이하 정보를 표시할 수 있는 수 형식
- 부동 소수점 표현
- 100.0, 10.0*10, 1.0*10^2 같은 값에 대한 표현
- 두 정수 사이에는 무수히 많은 실수가 존재하기 때문에 일정 수준이 오류(부동소수점 오차)를 인정함
- float(4byte), double(8byte), long double(8byte 이상)이 있지만 사실상 float은 사용하지 않는다
- float
  - 유효 자릿수: 소수점 이하 6자리
- double
  - 유효 자릿수: 소수점 이하 15자리
- long double
  - double 이상

## 실수형 - 부동 소수점 오차

- 근사값을 사용하기 때문에 오차가 생기는 것이다
- 그래서 float이 아닌, 해상도가 높은 double을 사용해야한다

## 컴퓨터가 글자를 말하는 방법(ASCII)

- 십진수 65
- 컴퓨터에겐 영문 대문자 'A'
- 16진수로는 0x41
- ASCII 는 2^7, 7bit 체계이다
  - 하나의 bit를 이용해 자신들이 부호를 custom할 수 있다
- ASCII는 미국에서 사용하는 표준 코드 체계
- 숫자와 글자를 구별하지 않고 정보를 말할 때는 Binary(Binary의 부분집합이 ASCII 이다)

### 문자와 문자열의 실체

- 문자와 문자(배)열이다
- 컴퓨터 과학에서 공백(Whitespace) 은 일반적으로 눈에 보이지 않는 문자들을 통칭한다
- 주요 공백 문자들과 각각의 16진수값
  - 캐리지 리턴 (Carriage Return - CR): 커서를 현재 줄의 맨 앞으로 이동 - `0D`
  - 라인 피드 (Line Feed - LF): 커서를 다음 줄로 이동 - `0A`
  - 스페이스 (Space): 한 칸의 빈 공간을 만듬 - `20`
- 윈도우에서는 운영체제에서는 줄 바꿈을 나타내기 위해 캐리지 리턴(CR)과 라인 피드(LF)를 조합한 `0D0A`를 사용
- 유닉스(Unix) 및 리눅스(Linux), macOS계열 운영체제에서는 라인 피드(LF) 하나(`0A`)만으로 줄 바꿈을 나타냄

## 유니코드(UTF-8, UTF-16)

- C언어의 문자열은 MBCS(Multi bytes Character Sets)와 Unicode 문자열로 나눔
- 유니코드는 한글, 영문 모두 한 글자가 2byte(가변길이)

### UTF-8 (가장 널리 사용됨)

- 가변 길이 인코딩: 문자에 따라 1바이트에서 4바이트까지 사용한다
- 영어 (ASCII 문자): 1바이트로 표현하며, ASCII와 완벽히 호환된다
- 한글, 대부분의 유럽어: 2 또는 3바이트로 표현한다
- 그 외 문자, 이모지 등: 4바이트로 표현한다
- 장점: 웹에서 표준으로 사용될 만큼 효율성과 호환성이 뛰어나다

### UTF-16

- 가변 길이 인코딩: 문자에 따라 2바이트 또는 4바이트를 사용한다
- 기본적인 문자 (대부분의 현대 언어): 2바이트로 표현한다 (이것이 '유니코드는 2바이트'라는 오해의 기원이 되었다.)
- 희귀 문자, 옛글자, 일부 이모지: 4바이트로 표현한다
- 특징: Java, Windows 내부 등에서 주로 사용되는 방식이다
