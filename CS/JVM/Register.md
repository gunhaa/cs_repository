# JVM이 레지스터를 사용하지 않는 이유

> JVM은 스택기반이라 레지스터를 사용하지 않으며, JIT으로 컴파일되서 바이너리가 되면 그때부터 레지스터를 사용한다

- JVM은 모든 컴퓨터에서 구동되는 것을 목표로하기에, 하드웨어에 의존적인 레지스터를 사용하지 않는 스택 기반 머신이다
  - x86: eax, ebx, ecx..
  - ARM: r0, r1, r2..
  - RISC-V: x0, x1..
  - 하드웨어마다 레지스터 이름과 갯수가 다르기 때문이다
- JVM 바이트코드 모델이 레지스터 개념을 노출하지 않는다

## 이 구조의 장점

- 자바는 “Write once, run anywhere” (WORA)를 목표로 했기 때문에, CPU 레지스터를 추상화한 스택 기반 가상 머신 모델을 선택했다

## 이 구조의 단점

- 스택 기반은 레지스터 기반에 비해 명령어가 길고 느림
  - 예: 두 수를 더하려면
  - 스택 기반 → iload_1, iload_2, iadd, istore_3
  - 레지스터 기반 → add r1, r2, r3 (한 줄)
- 그래서 실제 실행 속도는 JIT이 네이티브 코드로 변환해서 레지스터를 활용해야 빨라진다